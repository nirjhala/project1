(window.webpackJsonp=window.webpackJsonp||[]).push([[197],{529:function(e,t,a){"use strict";a.r(t);a(4);var n={data:function(){return{errors:0,teacher:"",teacher_name:"",teachers:[],timeslots:[],weekdays:[],lists:[],allSelected:0,check:[],s:"",loaded:0,token:localStorage.getItem("token")}},mounted:function(){this.getTeachers()},methods:{printTimeTable:function(){var e=document.getElementById("timetable"),t=window.open("","Time-Table","width=800,height=600");t.document.open();var a='\n            <html>\n                <head>\n                    <title>Time-Table</title>\n                    <style>\n                    body {\n                        margin:0;\n                        font-family: sans-serif;\n                    }\n                    table {\n                        width: 100%;\n                        border-collapse: collapse;\n                    }\n                    table, th, td {\n                        border: 1px solid #000;\n                        padding: 5px 10px;\n                        font-size: 12px;\n                    }\n                    th {\n                        background: #555;\n                        color: #fff;\n                    }\n                    .text-center {\n                        text-align: center;\n                    }\n                    div.table-responsive {\n                        margin: 10px;\n                        padding: 10px;\n                        border: 1px solid #000;\n                    }\n                    h4 {\n                        margin-top: 20px;\n                    }\n                    @page {\n                        margin: 0;\n                        size: landscape;\n                    }\n                    </style>\n                </head>\n                <body onload="window.print()">'.concat(e.innerHTML,"</body>\n            </html>");t.document.write(a),t.document.close(),setTimeout((function(){t.close()}),10)},getTeachers:function(){var e=this;axios.create({baseURL:this.apiBaseUrl,headers:{Authorization:"Bearer "+this.token,Accept:"application/json"}}).get("get-teachers").then((function(t){e.teachers=t.data}))},getTimetable:function(){var e=this,t={teacher_id:this.teacher};axios.create({baseURL:this.apiBaseUrl,headers:{Authorization:"Bearer "+this.token,Accept:"application/json"}}).post("view-teacher-timetable",t).then((function(t){e.loaded=1,t.status?(e.timeslots=t.data.timeslots,e.lists=t.data.data,e.weekdays=t.data.weekdays,e.teacher_name=t.data.teacher_name):e.errors=1})).catch((function(t){e.loaded=1,console.log(t)}))},deleteRecord:function(){var e=this,t={check:this.check};$(this).closest("form");if(!(this.check.length>0))return this.loaded=1,swal("Warning","Please select at least one record to delete.","warning"),!1;swal({title:"Are you sure?",text:"Once deleted, you will not be able to recover this record!",icon:"warning",buttons:!0,dangerMode:!0}).then((function(a){a&&(e.loaded=0,axios.create({baseURL:e.apiBaseUrl,headers:{Authorization:"Bearer "+e.token,Accept:"application/json"}}).post("remove-vehicle",t).then((function(t){t.status?(e.getRecords(),e.$toast.success("Selected record(s) has been deleted.")):(e.loaded=1,e.$toast.warning("Record(s) unable to delete."))})).catch((function(t){e.loaded=1,console.log(t)})))}))}}},s=a(0),i=Object(s.a)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dashboard-content-one"},[a("div",{staticClass:"breadcrumbs-area"},[a("h3",[e._v("Teacher Timetable")]),e._v(" "),a("ul",[a("li",[a("router-link",{attrs:{to:{name:"dashboard"}}},[e._v("Dashboard")])],1),e._v(" "),a("li",[e._v("Teacher Timetable")])])]),e._v(" "),a("div",{staticClass:"mg-b-20"},[a("div",{staticClass:"row gutters-8"},[a("div",{staticClass:"col-4-xxxl col-xl-4 col-lg-3 col-12 form-group"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.teacher,expression:"teacher"}],staticClass:"form-control",attrs:{required:""},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.teacher=t.target.multiple?a:a[0]},function(t){return e.getTimetable()}]}},[a("option",{attrs:{value:""}},[e._v("Select Teacher")]),e._v(" "),e._l(e.teachers,(function(t,n){return a("option",{key:n,domProps:{value:t.id}},[e._v(e._s(t.name)+" - "+e._s(t.mobile))])}))],2)])])]),e._v(" "),a("form",{attrs:{method:"post"},on:{submit:function(t){return t.preventDefault(),e.deleteRecord()}}},[e.teacher?a("div",{staticClass:"card height-auto"},[a("div",{staticClass:"card-body"},[e.loaded?e._e():a("div",{staticClass:"text-center"},[a("img",{staticStyle:{"max-width":"100%"},attrs:{src:"img/preloader.gif",alt:""}})]),e._v(" "),e.loaded?a("div",[a("div",{attrs:{id:"timetable"}},[a("h4",{staticClass:"text-center"},[e._v("Time-Table of "+e._s(e.teacher_name))]),e._v(" "),e.lists?a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table display table-bordered text-nowrap"},[a("thead",[a("tr",[a("th",{staticClass:"text-center bg-dark text-white"},[e._v("\n                                            Day\n                                        ")]),e._v(" "),e._l(e.weekdays,(function(t,n){return a("th",{key:n,staticClass:"text-center bg-dark text-white"},[e._v(e._s(t))])}))],2)]),e._v(" "),a("tbody",e._l(e.lists,(function(t,n){return a("tr",{key:"slot"+n},[a("th",{staticClass:"text-center bg-dark text-white"},[a("div",[e._v(e._s(t.timeslot))]),e._v(" "),a("div",[e._v("\n                                                "+e._s(t.timeslot_time)+"\n                                            ")])]),e._v(" "),e._l(e.weekdays,(function(n,s){return a("td",{key:"wk"+s,staticClass:"text-center"},[a("div",[a("strong",[e._v(e._s(t[n]&&t[n].subject_info?t[n].subject_info.name:"-"))])]),e._v(" "),a("div",[e._v(e._s(t[n]&&t[n].section_info?"("+t[n].section_info.cls.name+" - "+t[n].section_info.name+")":""))])])}))],2)})),0)])]):e._e()]),e._v(" "),a("div",{staticClass:"text-center"},[a("button",{staticClass:"btn-fill-lg btn-gradient-yellow btn-hover-bluedark",attrs:{type:"button"},on:{click:function(t){return e.printTimeTable()}}},[e._v(" Print ")])])]):e._e()])]):e._e()])])}),[],!1,null,null,null);t.default=i.exports}}]);