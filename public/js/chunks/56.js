(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{601:function(e,t,o){"use strict";o.r(t);var a=(new Date).getFullYear(),r={props:["image_src","image"],data:function(){return{id:"",record:{isbn:"",title:"",subtitle:"",author:"",edition:"",edition_year:a,no_of_copies:1,cover_image:"",physical_form:"Other",publisher:"",series:"",size:"medium",price:0,category:"",editor:"",publication_year:a,publication_place:"",total_pages:"",book_source:"other",notes:"",pdf_link:""},categories:[],years:[],errors:[],loaded:0,token:localStorage.getItem("token")}},mounted:function(){var e=this.$route.params;null!=e.id&&""!=e.id?this.getInfo(e.id):this.loaded=1;for(var t=a;t>=a-20;t--)this.years.push(t);this.getCategories()},methods:{pdfHandler:function(e){this.pdf_file=e.target.files[0]},getCategories:function(){var e=this;axios.create({baseURL:this.apiBaseUrl,headers:{Authorization:"Bearer "+this.token,Accept:"application/json"}}).get("book/category/all").then((function(t){e.categories=t.data}))},getInfo:function(e){var t=this;axios.create({baseURL:this.apiBaseUrl,headers:{Authorization:"Bearer "+this.token,Accept:"application/json"}}).get("get-book-info/"+e).then((function(e){t.id=e.data.data.id,t.bookName=e.data.data.name,t.loaded=1,$(".select2").each((function(){$(this).trigger("change")}))}))},addData:function(){var e=this,t={record:this.record,image:this.image};if($("#addBookForm").is_valid()){var o=new FormData;o.append("pdf_file",this.pdf_file),o.append("record",JSON.stringify(t.record)),o.append("image",t.image),this.loaded=0,axios.create({baseURL:this.apiBaseUrl,headers:{Authorization:"Bearer "+this.token,Accept:"application/json"}}).post("book/add",t).then((function(t){t.data.status?e.$router.push({name:"book"}).then((function(t){e.loaded=1,e.$toast.success("Record saved.")})).catch((function(t){e.loaded=1,console.log(t)})):(e.loaded=1,e.errors=t.data.errors)})).catch((function(t){e.loaded=1,console.log(t)}))}},updateData:function(){var e=this,t={id:this.id,name:this.bookName};this.loaded=0,axios.create({baseURL:this.apiBaseUrl,headers:{Authorization:"Bearer "+this.token,Accept:"application/json"}}).post("update-book",t).then((function(t){t.data.status?e.$router.push({name:"book"}).then((function(t){e.loaded=1,e.$toast.success("Record saved.")})).catch((function(t){e.loaded=1,console.log(t)})):(e.loaded=1,e.errors=t.data.errors)})).catch((function(t){e.loaded=1,console.log(t)}))}}},l=o(0),i=Object(l.a)(r,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"dashboard-content-one"},[o("div",{staticClass:"breadcrumbs-area"},[o("div",{staticClass:"float-right"},[o("router-link",{staticClass:"fw-btn-fill btn-gradient-yellow text-white",attrs:{to:{name:"book"}}},[e._v("View Book")])],1),e._v(" "),o("h3",[e._v(e._s(e.id?"Edit":"Add")+" Book")]),e._v(" "),o("ul",[o("li",[o("router-link",{attrs:{to:{name:"dashboard"}}},[e._v("Dashboard")])],1),e._v(" "),o("li",[o("router-link",{attrs:{to:{name:"book"}}},[e._v("Book")])],1),e._v(" "),o("li",[e._v(e._s(e.id?"Edit":"Add")+" Book")])])]),e._v(" "),o("div",{staticClass:"card height-auto"},[o("div",{staticClass:"card-body"},[e.loaded?e._e():o("div",{staticClass:"text-center"},[o("b-spinner")],1),e._v(" "),e.loaded?o("div",[o("div",{staticClass:"heading-layout1"},[o("div",{staticClass:"item-title"},[o("h3",[e._v(e._s(e.id?"Edit":"Add New")+" Book")])])]),e._v(" "),o("form",{staticClass:"new-added-form",attrs:{id:"addBookForm",enctype:"multipart/form-data"},on:{submit:function(t){t.preventDefault(),e.id?e.updateData():e.addData()}}},[e.errors.length?o("div",{staticClass:"alert alert-danger"},[o("ul",{staticClass:"mb-0"},e._l(e.errors,(function(t,a){return o("li",{key:a},[e._v("\n                "+e._s(t)+"\n              ")])})),0)]):e._e(),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.id,expression:"id"}],attrs:{type:"hidden",value:""},domProps:{value:e.id},on:{input:function(t){t.target.composing||(e.id=t.target.value)}}}),e._v(" "),o("div",{staticClass:"row"},[o("div",{staticClass:"col-sm-9"},[o("div",{staticClass:"row"},[o("div",{staticClass:"col-xl-4 col-lg-6 col-12 form-group"},[o("label",[e._v("ISBN")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.record.isbn,expression:"record.isbn"}],staticClass:"form-control",attrs:{type:"text",placeholder:"ISBN"},domProps:{value:e.record.isbn},on:{input:function(t){t.target.composing||e.$set(e.record,"isbn",t.target.value)}}})]),e._v(" "),o("div",{staticClass:"col-xl-4 col-lg-6 col-12 form-group"},[o("label",[e._v("Title *")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.record.title,expression:"record.title"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Title",required:""},domProps:{value:e.record.title},on:{input:function(t){t.target.composing||e.$set(e.record,"title",t.target.value)}}})]),e._v(" "),o("div",{staticClass:"col-xl-4 col-lg-6 col-12 form-group"},[o("label",[e._v("Subtitle")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.record.subtitle,expression:"record.subtitle"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Subtitle"},domProps:{value:e.record.subtitle},on:{input:function(t){t.target.composing||e.$set(e.record,"subtitle",t.target.value)}}})])]),e._v(" "),o("div",{staticClass:"row"},[o("div",{staticClass:"col-xl-4 col-lg-6 col-12 form-group"},[o("label",[e._v("Author")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.record.author,expression:"record.author"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Author"},domProps:{value:e.record.author},on:{input:function(t){t.target.composing||e.$set(e.record,"author",t.target.value)}}})]),e._v(" "),o("div",{staticClass:"col-xl-4 col-lg-6 col-12 form-group"},[o("label",[e._v("Edition")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.record.edition,expression:"record.edition"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Edition",required:""},domProps:{value:e.record.edition},on:{input:function(t){t.target.composing||e.$set(e.record,"edition",t.target.value)}}})]),e._v(" "),o("div",{staticClass:"col-xl-4 col-lg-6 col-12 form-group"},[o("label",[e._v("Edition Year")]),e._v(" "),o("select",{directives:[{name:"model",rawName:"v-model",value:e.record.edition_year,expression:"record.edition_year"}],staticClass:"form-control",on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.record,"edition_year",t.target.multiple?o:o[0])}}},e._l(e.years,(function(t){return o("option",{domProps:{value:t}},[e._v(e._s(t))])})),0)])]),e._v(" "),o("div",{staticClass:"row"},[o("div",{staticClass:"col-xl-4 col-lg-6 col-12 form-group"},[o("label",[e._v("No. of Copies *")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.record.no_of_copies,expression:"record.no_of_copies"}],staticClass:"form-control",attrs:{type:"number",placeholder:"No. of Copies",required:""},domProps:{value:e.record.no_of_copies},on:{input:function(t){t.target.composing||e.$set(e.record,"no_of_copies",t.target.value)}}})]),e._v(" "),o("div",{staticClass:"col-xl-4 col-lg-6 col-12 form-group"},[o("label",[e._v("Physical Form")]),e._v(" "),o("select",{directives:[{name:"model",rawName:"v-model",value:e.record.physical_form,expression:"record.physical_form"}],staticClass:"form-control",on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.record,"physical_form",t.target.multiple?o:o[0])}}},[o("option",{attrs:{value:"Book"}},[e._v("Book")]),e._v(" "),o("option",{attrs:{value:"Journal"}},[e._v("Journal")]),e._v(" "),o("option",{attrs:{value:"CD/DVD"}},[e._v("CD/DVD")]),e._v(" "),o("option",{attrs:{value:"Manuscript"}},[e._v("Manuscript")]),e._v(" "),o("option",{attrs:{value:"Other"}},[e._v("Other")])])]),e._v(" "),o("div",{staticClass:"col-xl-4 col-lg-6 col-12 form-group"},[o("label",[e._v("Publisher")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.record.publisher,expression:"record.publisher"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Publisher"},domProps:{value:e.record.publisher},on:{input:function(t){t.target.composing||e.$set(e.record,"publisher",t.target.value)}}})])]),e._v(" "),o("div",{staticClass:"row"},[o("div",{staticClass:"col-xl-4 col-lg-6 col-12 form-group"},[o("label",[e._v("Publication Year")]),e._v(" "),o("select",{directives:[{name:"model",rawName:"v-model",value:e.record.publication_year,expression:"record.publication_year"}],staticClass:"form-control",on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.record,"publication_year",t.target.multiple?o:o[0])}}},e._l(e.years,(function(t){return o("option",{domProps:{value:t}},[e._v(e._s(t))])})),0)]),e._v(" "),o("div",{staticClass:"col-xl-4 col-lg-6 col-12 form-group"},[o("label",[e._v("Series *")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.record.series,expression:"record.series"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Series"},domProps:{value:e.record.series},on:{input:function(t){t.target.composing||e.$set(e.record,"series",t.target.value)}}})]),e._v(" "),o("div",{staticClass:"col-xl-4 col-lg-6 col-12 form-group"},[o("label",[e._v("Size")]),e._v(" "),o("select",{directives:[{name:"model",rawName:"v-model",value:e.record.size,expression:"record.size"}],staticClass:"form-control",on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.record,"size",t.target.multiple?o:o[0])}}},[o("option",{attrs:{value:"medium"}},[e._v("Medium")]),e._v(" "),o("option",{attrs:{value:"large"}},[e._v("Large")]),e._v(" "),o("option",{attrs:{value:"huge"}},[e._v("Huge")]),e._v(" "),o("option",{attrs:{value:"small"}},[e._v("Small")]),e._v(" "),o("option",{attrs:{value:"tiny"}},[e._v("Tiny")])])])]),e._v(" "),o("div",{staticClass:"row"},[o("div",{staticClass:"col-xl-4 col-lg-6 col-12 form-group"},[o("label",[e._v("Price")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.record.price,expression:"record.price"}],staticClass:"form-control",attrs:{type:"number",placeholder:"Price"},domProps:{value:e.record.price},on:{input:function(t){t.target.composing||e.$set(e.record,"price",t.target.value)}}})]),e._v(" "),o("div",{staticClass:"col-xl-4 col-lg-6 col-12 form-group"},[o("label",[e._v("Category")]),e._v(" "),o("select",{directives:[{name:"model",rawName:"v-model",value:e.record.category,expression:"record.category"}],staticClass:"form-control",attrs:{required:""},on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.record,"category",t.target.multiple?o:o[0])}}},[o("option",{attrs:{value:""}},[e._v("Select Category")]),e._v(" "),e._l(e.categories,(function(t){return o("option",{domProps:{value:t.id}},[e._v("\n                      "+e._s(t.name)+"\n                    ")])}))],2)]),e._v(" "),o("div",{staticClass:"col-xl-4 col-lg-6 col-12 form-group"},[o("label",[e._v("Editor")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.record.editor,expression:"record.editor"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Editor"},domProps:{value:e.record.editor},on:{input:function(t){t.target.composing||e.$set(e.record,"editor",t.target.value)}}})])]),e._v(" "),o("div",{staticClass:"row"},[o("div",{staticClass:"col-xl-4 col-lg-6 col-12 form-group"},[o("label",[e._v("Publication Place *")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.record.publication_place,expression:"record.publication_place"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Publication Place"},domProps:{value:e.record.publication_place},on:{input:function(t){t.target.composing||e.$set(e.record,"publication_place",t.target.value)}}})]),e._v(" "),o("div",{staticClass:"col-xl-4 col-lg-6 col-12 form-group"},[o("label",[e._v("Total Pages")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.record.total_pages,expression:"record.total_pages"}],staticClass:"form-control",attrs:{type:"number",placeholder:"Total Pages"},domProps:{value:e.record.total_pages},on:{input:function(t){t.target.composing||e.$set(e.record,"total_pages",t.target.value)}}})]),e._v(" "),o("div",{staticClass:"col-xl-4 col-lg-6 col-12 form-group"},[o("label",[e._v("Source of Book")]),e._v(" "),o("select",{directives:[{name:"model",rawName:"v-model",value:e.record.book_source,expression:"record.book_source"}],staticClass:"form-control",on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.record,"book_source",t.target.multiple?o:o[0])}}},[o("option",{attrs:{value:"local purchase"}},[e._v("Local Purchase")]),e._v(" "),o("option",{attrs:{value:"university"}},[e._v("University")]),e._v(" "),o("option",{attrs:{value:"world bank donation"}},[e._v("\n                      World Bank Donation\n                    ")]),e._v(" "),o("option",{attrs:{value:"personal donation"}},[e._v("\n                      Personal Donation\n                    ")]),e._v(" "),o("option",{attrs:{value:"other"}},[e._v("Other")])])])]),e._v(" "),o("div",{staticClass:"form-group"},[o("label",[e._v("Notes")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.record.notes,expression:"record.notes"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Notes"},domProps:{value:e.record.notes},on:{input:function(t){t.target.composing||e.$set(e.record,"notes",t.target.value)}}})]),e._v(" "),o("div",{staticClass:"row"},[o("div",{staticClass:"col-12 form-group mg-t-8"},[o("button",{staticClass:"btn-fill-lg btn-gradient-yellow btn-hover-bluedark",attrs:{type:"submit"}},[e._v("\n                    "+e._s(e.id?"Update":"Save")+"\n                  ")]),e._v(" "),o("button",{staticClass:"btn-fill-lg bg-blue-dark btn-hover-yellow",attrs:{type:"reset"}},[e._v("\n                    Reset\n                  ")])])])]),e._v(" "),o("div",{staticClass:"col-sm-3"},[o("div",{staticClass:"mb-3"},[o("label",[e._v("Cover Image")]),e._v(" "),o("img",{staticClass:"w-100 featuredImage",attrs:{src:e.image_src,alt:"",title:"",id:"featuredImage"}}),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.image,expression:"image"}],attrs:{type:"hidden",value:"",id:"featuredImageId"},domProps:{value:e.image},on:{input:function(t){t.target.composing||(e.image=t.target.value)}}})]),e._v(" "),o("button",{staticClass:"uploadImage btn-fill-lg bg-blue-dark btn-hover-yellow btn-block uploadImageBtn",attrs:{type:"button","data-image":"#featuredImage","data-field":"#featuredImageId"}},[e._v("\n                Upload Image\n              ")]),e._v(" "),o("hr"),e._v(" "),o("div",{staticClass:"mt-3 form-group"},[o("label",[e._v("Upload PDF File (If ebook)")]),e._v(" "),o("input",{attrs:{type:"file",value:""},on:{change:e.pdfHandler}})]),e._v(" "),o("div",{staticClass:"form-group h3 font-bold"},[e._v("OR")]),e._v(" "),o("div",{staticClass:"form-group"},[o("label",[e._v("PDF Link (If ebook)")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.record.pdf_link,expression:"record.pdf_link"}],staticClass:"form-control",attrs:{type:"text",value:""},domProps:{value:e.record.pdf_link},on:{input:function(t){t.target.composing||e.$set(e.record,"pdf_link",t.target.value)}}})])])])])]):e._e()])])])}),[],!1,null,null,null);t.default=i.exports}}]);