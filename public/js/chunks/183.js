(window.webpackJsonp=window.webpackJsonp||[]).push([[183],{539:function(t,e,r){"use strict";r.r(e);var a=new Date,o=""+(a.getMonth()+1),s=""+a.getDate(),i=a.getFullYear();o.length<2&&(o="0"+o),s.length<2&&(s="0"+s);for(var n=[i,o,s].join("-"),l=[],c=i;c>=i-200;c--)l.push(c);var d={props:["image_src","image"],data:function(){return{record:{name:"",registration_no:"",roll_prefix:"",phone:"",email:"",est_year:"",address:"",state:"",city:"",student_id_instructions:"",teacher_id_instructions:"",staff_id_instructions:""},logo:"",logo_src:"img/default.jpg",favicon:"",favicon_src:"img/default.jpg",states:[],cities:[],years:l,errors:[],loaded:0,token:localStorage.getItem("token"),maxDate:n}},computed:{name:{get:function(){return(this.title+" "+this.fname+" "+this.lname).trim()},set:function(t){}}},mounted:function(){this.$route.params;this.getSchoolInfo()},methods:{logoHandler:function(t){this.logo=t.target.files[0],this.logo_src=URL.createObjectURL(this.logo)},faviconHandler:function(t){this.favicon=t.target.files[0],this.favicon_src=URL.createObjectURL(this.favicon)},getSchoolInfo:function(){var t=this;axios.create({baseURL:this.apiBaseUrl,headers:{Authorization:"Bearer "+this.token,Accept:"application/json"}}).get("get-school-info").then((function(e){t.states=e.data.states,t.cities=e.data.cities;var r=e.data.userInfo;t.record.name=r.name,t.record.registration_no=r.registration_no,t.record.roll_prefix=r.roll_prefix,t.record.phone=r.phone,t.record.email=r.email,t.record.est_year=r.est_year?r.est_year:"",t.record.address=r.address,t.record.student_id_instructions=r.student_id_instructions,t.record.teacher_id_instructions=r.teacher_id_instructions,t.record.staff_id_instructions=r.staff_id_instructions,t.record.state=r.city?r.city.state:"",t.record.city=r.city_id,console.log(r);var a=r.logo?t.baseURL+"img/profiles/"+r.logo:t.baseURL+"/img/default.jpg",o=r.favicon?t.baseURL+"img/profiles/"+r.favicon:t.baseURL+"/img/default.jpg";t.logo_src=a,t.favicon_src=o,t.loaded=1}))},getCities:function(){var t=this,e={id:this.state};axios.create({baseURL:this.apiBaseUrl,headers:{Authorization:"Bearer "+this.token,Accept:"application/json"}}).post("get-cities-by-state",e).then((function(e){t.cities=e.data}))},updateData:function(){var t=this,e=new FormData;e.append("logo",this.logo),e.append("favicon",this.favicon);var r=JSON.stringify(this.record);e.append("record",r),this.loaded=0,axios.create({baseURL:this.apiBaseUrl,headers:{Authorization:"Bearer "+this.token,Accept:"application/json","Content-Type":"multipart/form-data"}}).post("general-settings",e).then((function(e){t.loaded=1,e.data.status||(t.errors=e.data.errors)})).catch((function(e){t.loaded=1,console.log(e)}))}}},u=r(0),v=Object(u.a)(d,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"dashboard-content-one"},[r("div",{staticClass:"breadcrumbs-area"},[r("h3",[t._v("General Settings")]),t._v(" "),r("ul",[r("li",[r("router-link",{attrs:{to:{name:"dashboard"}}},[t._v("Dashboard")])],1),t._v(" "),r("li",[t._v("General Settings")])])]),t._v(" "),r("div",{staticClass:"card height-auto"},[r("div",{staticClass:"card-body"},[t.loaded?t._e():r("div",{staticClass:"text-center"},[r("img",{staticStyle:{"max-width":"100%"},attrs:{src:"img/preloader.gif",alt:""}})]),t._v(" "),t.loaded?r("div",[r("form",{staticClass:"new-added-form",attrs:{enctype:"multipart/form-data"},on:{submit:function(e){return e.preventDefault(),t.updateData()}}},[t.errors.length?r("div",{staticClass:"alert alert-danger"},[r("ul",{staticClass:"mb-0"},t._l(t.errors,(function(e,a){return r("li",{key:a},[t._v(t._s(e))])})),0)]):t._e(),t._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-sm-9"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-sm-4 form-group"},[r("label",[t._v("School Name *")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.record.name,expression:"record.name"}],staticClass:"form-control",attrs:{type:"text",value:"",placeholder:"School Name"},domProps:{value:t.record.name},on:{input:function(e){e.target.composing||t.$set(t.record,"name",e.target.value)}}})]),t._v(" "),r("div",{staticClass:"col-sm-4 form-group"},[r("label",[t._v("Registration No. *")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.record.registration_no,expression:"record.registration_no"}],staticClass:"form-control",attrs:{type:"text",value:"",placeholder:"Registration No."},domProps:{value:t.record.registration_no},on:{input:function(e){e.target.composing||t.$set(t.record,"registration_no",e.target.value)}}})]),t._v(" "),r("div",{staticClass:"col-sm-4 form-group"},[r("label",[t._v("Roll No. Prefix")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.record.roll_prefix,expression:"record.roll_prefix"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Roll No. Prefix",required:""},domProps:{value:t.record.roll_prefix},on:{input:function(e){e.target.composing||t.$set(t.record,"roll_prefix",e.target.value)}}})]),t._v(" "),r("div",{staticClass:"col-sm-4 form-group"},[r("label",[t._v("Phone No. *")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.record.phone,expression:"record.phone"}],staticClass:"form-control",attrs:{type:"tel",name:"",placeholder:"Phone No.",required:""},domProps:{value:t.record.phone},on:{input:function(e){e.target.composing||t.$set(t.record,"phone",e.target.value)}}})]),t._v(" "),r("div",{staticClass:"col-sm-4 form-group"},[r("label",[t._v("Email Address *")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.record.email,expression:"record.email"}],staticClass:"form-control",attrs:{type:"email",name:"",placeholder:"Email Address",required:""},domProps:{value:t.record.email},on:{input:function(e){e.target.composing||t.$set(t.record,"email",e.target.value)}}})]),t._v(" "),r("div",{staticClass:"col-sm-4 form-group"},[r("label",[t._v("Est. Year *")]),t._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:t.record.est_year,expression:"record.est_year"}],staticClass:"form-control",on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.record,"est_year",e.target.multiple?r:r[0])}}},[r("option",{attrs:{value:""}},[t._v("Select Year")]),t._v(" "),t._l(t.years,(function(e){return r("option",{domProps:{value:e}},[t._v(t._s(e))])}))],2)])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",[t._v("Address *")]),t._v(" "),r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.record.address,expression:"record.address"}],staticClass:"form-control h-auto p-3",attrs:{rows:"8",placeholder:"Address",required:""},domProps:{value:t.record.address},on:{input:function(e){e.target.composing||t.$set(t.record,"address",e.target.value)}}})]),t._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-sm-6 form-group"},[r("label",[t._v("State *")]),t._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:t.record.state,expression:"record.state"}],staticClass:"form-control",attrs:{required:""},on:{change:[function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.record,"state",e.target.multiple?r:r[0])},function(e){return t.getCities()}]}},[r("option",{attrs:{value:""}},[t._v("Select State")]),t._v(" "),t._l(t.states,(function(e){return r("option",{domProps:{value:e.id}},[t._v(t._s(e.name))])}))],2)]),t._v(" "),r("div",{staticClass:"col-sm-6 form-group"},[r("label",[t._v("City *")]),t._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:t.record.city,expression:"record.city"}],staticClass:"form-control",attrs:{required:""},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.record,"city",e.target.multiple?r:r[0])}}},[r("option",{attrs:{value:""}},[t._v("Select City")]),t._v(" "),t._l(t.cities,(function(e){return r("option",{domProps:{value:e.id}},[t._v(t._s(e.name))])}))],2)])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",[t._v("Student ID-Card Instructions *")]),t._v(" "),r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.record.student_id_instructions,expression:"record.student_id_instructions"}],staticClass:"form-control h-auto p-3",attrs:{rows:"8",placeholder:"Address",required:""},domProps:{value:t.record.student_id_instructions},on:{input:function(e){e.target.composing||t.$set(t.record,"student_id_instructions",e.target.value)}}})]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",[t._v("Teacher ID-Card Instructions *")]),t._v(" "),r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.record.teacher_id_instructions,expression:"record.teacher_id_instructions"}],staticClass:"form-control h-auto p-3",attrs:{rows:"8",placeholder:"Address",required:""},domProps:{value:t.record.teacher_id_instructions},on:{input:function(e){e.target.composing||t.$set(t.record,"teacher_id_instructions",e.target.value)}}})]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",[t._v("Staff ID-Card Instructions *")]),t._v(" "),r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.record.staff_id_instructions,expression:"record.staff_id_instructions"}],staticClass:"form-control h-auto p-3",attrs:{rows:"8",placeholder:"Address",required:""},domProps:{value:t.record.staff_id_instructions},on:{input:function(e){e.target.composing||t.$set(t.record,"staff_id_instructions",e.target.value)}}})]),t._v(" "),t._m(0)]),t._v(" "),r("div",{staticClass:"col-sm-3"},[r("div",{staticClass:"mb-3"},[r("div",{staticClass:"mb-3"},[r("label",[t._v("Upload Logo")]),t._v(" "),r("label",{staticClass:"d-block"},[r("img",{staticStyle:{width:"100%",height:"200px","object-fit":"contain"},attrs:{src:t.logo_src,alt:"",title:"",id:"featuredImage"}}),t._v(" "),r("input",{staticClass:"d-none",attrs:{type:"file",id:"siteLogo"},on:{change:t.logoHandler}})])]),t._v(" "),r("label",{staticClass:"uploadImage btn-fill-lg bg-blue-dark btn-hover-yellow btn-block text-center",attrs:{for:"siteLogo"}},[t._v("Choose Image")])]),t._v(" "),r("div",{staticClass:"mb-3"},[r("div",{staticClass:"mb-3"},[r("label",[t._v("Upload Favicon")]),t._v(" "),r("label",{staticClass:"d-block text-center"},[r("img",{staticStyle:{"max-width":"100%","max-height":"300px","object-fit":"contain"},attrs:{src:t.favicon_src,alt:"",title:"",id:"featuredImage"}}),t._v(" "),r("input",{staticClass:"d-none",attrs:{type:"file",id:"siteFavicon"},on:{change:t.faviconHandler}})])]),t._v(" "),r("label",{staticClass:"uploadImage btn-fill-lg bg-blue-dark btn-hover-yellow btn-block text-center",attrs:{for:"siteFavicon"}},[t._v("Choose Image")])])])])])]):t._e()])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-12 form-group mg-t-8"},[e("label",[this._v(" ")]),this._v(" "),e("button",{staticClass:"btn-fill-lg btn-gradient-yellow btn-hover-bluedark",attrs:{type:"submit"}},[this._v("Update")]),this._v(" "),e("button",{staticClass:"btn-fill-lg bg-blue-dark btn-hover-yellow",attrs:{type:"reset"}},[this._v("Reset")])])])}],!1,null,null,null);e.default=v.exports}}]);