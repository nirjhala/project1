(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{592:function(t,e,a){"use strict";a.r(e);var s={data:function(){return{id:"",record:{name:"",mobile:"",mobile2:"",type:"",address:""},lists:{},allSelected:!1,check:[],errors:[],loaded:0,token:localStorage.getItem("token")}},mounted:function(){var t=this.$route.params;this.getData(),null!=t.id&&""!=t.id&&this.getInfo(t.id)},methods:{rerenderSelf:function(){console.log("reload"),this.$emit("rerender",1)},printPass:function(t){var e=document.getElementById(t),a=window.open("","Time-Table","width=800,height=600");a.document.open();var s='\n          <html>\n              <head>\n                  <title>Library Pass</title>\n                  <style>\n                  body {\n                      margin:0;\n                      font-family: sans-serif;\n                  }\n                  @page {\n                      size: 2.13in 3.38in;\n                      margin: 15px;\n                  }\n                  </style>\n              </head>\n              <body onload="window.print()">'.concat(e.innerHTML,"</body>\n          </html>");a.document.write(s),a.document.close(),setTimeout((function(){a.close()}),10)},checkAll:function(){var t=this;t.check=[],t.allSelected||$.each(t.lists.data,(function(e,a){t.check.push(a.id)}))},getInfo:function(t){var e=this;axios.create({baseURL:this.apiBaseUrl,headers:{Authorization:"Bearer "+this.token,Accept:"application/json"}}).get("book/pass/info/"+t).then((function(t){e.record=t.data,e.id=t.data.id,e.loaded=1}))},addData:function(){var t=this,e={record:this.record};$("#addPassForm").is_valid()&&(this.loaded=0,this.errors=[],axios.create({baseURL:this.apiBaseUrl,headers:{Authorization:"Bearer "+this.token,Accept:"application/json"}}).post("book/pass",e).then((function(e){t.loaded=1,e.data.status?(t.$toast.success(e.data.message),t.getData(1)):t.errors=e.data.errors})).catch((function(e){t.loaded=1,console.log(e)})))},updateData:function(t){var e=this,a={record:this.record};$("#addPassForm").is_valid()&&(this.loaded=0,this.errors=[],axios.create({baseURL:this.apiBaseUrl,headers:{Authorization:"Bearer "+this.token,Accept:"application/json"}}).post("library/pass/edit/"+t,a).then((function(t){e.loaded=1,t.data.status?(e.record={name:""},e.$toast.success(t.data.message),e.$router.push({name:"book-pass"})):e.errors=t.data.errors})).catch((function(t){e.loaded=1,console.log(t)})))},getData:function(t){var e=this;void 0===t&&(t=1),axios.create({baseURL:this.apiBaseUrl,headers:{Authorization:"Bearer "+this.token,Accept:"application/json"}}).get("book/pass/?page="+t).then((function(t){e.loaded=1,e.lists=t.data})).catch((function(t){e.loaded=1}))},deleteRecord:function(){var t=this,e={check:this.check};$(this).closest("form");if(!(this.check.length>0))return this.loaded=1,swal("Warning","Please select at least one record to delete.","warning"),!1;swal({title:"Are you sure?",text:"Once deleted, you will not be able to recover this record!",icon:"warning",buttons:!0,dangerMode:!0}).then((function(a){a&&(t.loaded=0,axios.create({baseURL:t.apiBaseUrl,headers:{Authorization:"Bearer "+t.token,Accept:"application/json"}}).post("book/pass/remove",e).then((function(e){e.status?(t.getData(),t.$toast.success("Selected record(s) has been deleted.")):(t.loaded=1,t.$toast.warning("Record(s) unable to delete."))})).catch((function(e){t.loaded=1,console.log(e)})))}))}},watch:{$route:function(t,e){var a=this.$route.params;this.loaded=0,this.getData(),null!=a.id&&""!=a.id&&this.getInfo(a.id)}}},i=a(0),r=Object(i.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dashboard-content-one"},[a("div",{staticClass:"breadcrumbs-area"},[a("h3",[t._v("Library Pass")]),t._v(" "),a("ul",[a("li",[a("router-link",{attrs:{to:{name:"dashboard"}}},[t._v("Dashboard")])],1),t._v(" "),a("li",[t._v("Library Pass")])])]),t._v(" "),t.loaded?a("div",[t.loaded?t._e():a("div",{staticClass:"text-center"},[a("b-spinner")],1),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-4"},[a("form",{staticClass:"new-added-form",attrs:{id:"addPassForm"},on:{submit:function(e){e.preventDefault(),t.id?t.updateData(t.id):t.addData()}}},[t.errors.length?a("div",{staticClass:"alert alert-danger"},[a("ul",{staticClass:"mb-0"},t._l(t.errors,(function(e,s){return a("li",{key:s},[t._v("\n                "+t._s(e)+"\n              ")])})),0)]):t._e(),t._v(" "),a("div",{staticClass:"card height-auto"},[a("div",{staticClass:"card-body"},[t._m(0),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.id,expression:"id"}],attrs:{type:"hidden",value:""},domProps:{value:t.id},on:{input:function(e){e.target.composing||(t.id=e.target.value)}}}),t._v(" "),a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.record.name,expression:"record.name"}],staticClass:"form-control",attrs:{type:"text",value:"",placeholder:"Name *",required:""},domProps:{value:t.record.name},on:{input:function(e){e.target.composing||t.$set(t.record,"name",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.record.mobile,expression:"record.mobile"}],staticClass:"form-control",attrs:{type:"tel",value:"",placeholder:"Mobile No. *",required:""},domProps:{value:t.record.mobile},on:{input:function(e){e.target.composing||t.$set(t.record,"mobile",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.record.mobile2,expression:"record.mobile2"}],staticClass:"form-control",attrs:{type:"tel",value:"",placeholder:"Mobile No. 2 (Alternate No.)"},domProps:{value:t.record.mobile2},on:{input:function(e){e.target.composing||t.$set(t.record,"mobile2",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.record.type,expression:"record.type"}],staticClass:"form-control",attrs:{required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.record,"type",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[t._v("Type *")]),t._v(" "),a("option",{attrs:{value:"student"}},[t._v("Student")]),t._v(" "),a("option",{attrs:{value:"teacher"}},[t._v("Teacher")]),t._v(" "),a("option",{attrs:{value:"other"}},[t._v("Other")])])]),t._v(" "),a("div",{staticClass:"form-group"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.record.address,expression:"record.address"}],staticClass:"form-control h-auto",attrs:{rows:"8",placeholder:"Address *",required:""},domProps:{value:t.record.address},on:{input:function(e){e.target.composing||t.$set(t.record,"address",e.target.value)}}})]),t._v(" "),t._m(1)])])])]),t._v(" "),a("div",{staticClass:"col-sm-8"},[a("form",{attrs:{method:"post"},on:{submit:function(e){return e.preventDefault(),t.deleteRecord()}}},[a("div",{staticClass:"card height-auto"},[a("div",{staticClass:"card-body"},[a("div",[t._m(2),t._v(" "),t.loaded?t._e():a("div",{staticClass:"text-center"},[a("b-spinner")],1),t._v(" "),t.loaded?a("div",[t.lists?t._e():a("div",{staticClass:"alert alert-warning"},[a("i",{staticClass:"fa fa-exclamation-circle"}),t._v("\n                    No record(s) found.\n                  ")]),t._v(" "),t.lists?a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table display data-table text-nowrap"},[a("thead",[a("tr",[a("th",[a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.allSelected,expression:"allSelected"}],staticClass:"form-check-input",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.allSelected)?t._i(t.allSelected,null)>-1:t.allSelected},on:{click:t.checkAll,change:function(e){var a=t.allSelected,s=e.target,i=!!s.checked;if(Array.isArray(a)){var r=t._i(a,null);s.checked?r<0&&(t.allSelected=a.concat([null])):r>-1&&(t.allSelected=a.slice(0,r).concat(a.slice(r+1)))}else t.allSelected=i}}}),t._v(" "),a("label",{staticClass:"form-check-label"},[t._v("Sr. No.")])])]),t._v(" "),a("th",[t._v("Name")]),t._v(" "),a("th",[t._v("Mobile No.")]),t._v(" "),a("th",[t._v("Type")]),t._v(" "),a("th",[t._v("Address")]),t._v(" "),a("th",[t._v("Barcode")])])]),t._v(" "),a("tbody",t._l(t.lists.data,(function(e,s){return a("tr",[a("td",[e.classes_count?t._e():a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.check,expression:"check"}],key:t.lists.from+s,staticClass:"form-check-input",attrs:{type:"checkbox"},domProps:{value:e.id,checked:Array.isArray(t.check)?t._i(t.check,e.id)>-1:t.check},on:{change:function(a){var s=t.check,i=a.target,r=!!i.checked;if(Array.isArray(s)){var o=e.id,n=t._i(s,o);i.checked?n<0&&(t.check=s.concat([o])):n>-1&&(t.check=s.slice(0,n).concat(s.slice(n+1)))}else t.check=r}}}),t._v(" "),a("label",{staticClass:"form-check-label"},[t._v(t._s(t.lists.from+s)+".")])]),t._v(" "),e.classes_count?a("div",{staticClass:"form-check"},[a("input",{staticClass:"form-check-input",attrs:{type:"checkbox",disabled:""}}),t._v(" "),a("label",{staticClass:"form-check-label"},[t._v(t._s(t.lists.from+s)+".")])]):t._e()]),t._v(" "),a("td",[a("router-link",{attrs:{to:{path:t.baseURL+"library-pass/edit/"+e.id,params:e},"data-toggle":"tooltip",title:"Edit"},on:{click:t.rerenderSelf}},[a("i",{staticClass:"fa fa-edit"}),t._v("\n                              "+t._s(e.name))]),t._v(" "),a("div",[a("button",{staticClass:"btn btn-sm btn-dark",attrs:{type:"button"},on:{click:function(a){return t.printPass("pass_"+e.id)}}},[a("i",{staticClass:"icon-print"}),t._v(" Print\n                              ")])]),t._v(" "),a("div",{staticStyle:{display:"none"},attrs:{id:"pass_"+e.id}},[a("div",{staticStyle:{border:"1px solid #000","border-radius":"12px",overflow:"hidden",height:"calc(100% - 10px)",position:"relative"}},[a("div",{staticStyle:{padding:"5px 0"}},[a("img",{staticStyle:{width:"100%",height:"70px","object-fit":"contain"},attrs:{src:t.baseURL+"img/profiles/"+e.parent_school.logo,alt:""}})]),t._v(" "),a("div",{staticStyle:{background:"#000",padding:"10px","text-align":"center",color:"#fff"}},[a("div",{staticStyle:{"font-size":"16px","text-transform":"uppercase","font-weight":"bold"}},[t._v("\n                                    "+t._s(e.parent_school.name)+"\n                                  ")]),t._v(" "),a("div",{staticStyle:{"font-size":"8px"}},[t._v("\n                                    LIBRARY PASS\n                                  ")])]),t._v(" "),a("div",{staticStyle:{padding:"10px"}},[a("table",{staticStyle:{width:"100%","font-size":"10px"}},[a("tr",[a("th",{attrs:{align:"left"}},[t._v("Name")]),t._v(" "),a("td",{staticStyle:{"white-space":"nowrap"}},[t._v("\n                                        : "+t._s(e.name)+"\n                                      ")])]),t._v(" "),a("tr",[a("th",{staticStyle:{"white-space":"nowrap"},attrs:{align:"left",valign:"top"}},[t._v("\n                                        Mobile No.\n                                      ")]),t._v(" "),a("td",{staticStyle:{"white-space":"nowrap"}},[t._v("\n                                        : "+t._s(e.mobile)),a("br"),e.mobile2?a("span",[t._v("  "+t._s(e.mobile2))]):t._e()])]),t._v(" "),a("tr",[a("th",{attrs:{align:"left"}},[t._v("Type")]),t._v(" "),a("td",[t._v(": "+t._s(e.type))])]),t._v(" "),a("tr",[a("th",{attrs:{align:"left"}},[t._v("Address")]),t._v(" "),a("td",[t._v(": "+t._s(e.address))])])]),t._v(" "),a("div",{staticStyle:{position:"absolute",bottom:"15px",left:"0",right:"0"}},[a("div",{staticStyle:{"text-align":"center"}},[a("div",[a("img",{staticStyle:{"max-width":"100%"},attrs:{src:e.barcode_image,alt:""}})]),t._v(" "),a("div",{staticStyle:{"letter-spacing":"5px","font-size":"8px",margin:"2px 0"}},[t._v("\n                                        "+t._s(e.barcode)+"\n                                      ")])])])])])])],1),t._v(" "),a("td",[t._v("\n                            "+t._s(e.mobile)+"\n                            "),e.mobile2?a("span",[a("br"),t._v(t._s(e.mobile2))]):t._e()]),t._v(" "),a("td",[t._v(t._s(e.type))]),t._v(" "),a("td",[t._v(t._s(e.address))]),t._v(" "),a("td",[a("div",{staticStyle:{"text-align":"center"}},[a("div",[a("img",{attrs:{src:e.barcode_image,alt:""}})]),t._v(" "),a("div",{staticStyle:{"letter-spacing":"5px","font-size":"8px",margin:"2px 0"}},[t._v("\n                                "+t._s(e.barcode)+"\n                              ")])])])])})),0)]),t._v(" "),a("pagination",{attrs:{data:t.lists},on:{"pagination-change-page":t.getData}})],1):t._e()]):t._e()])])])])])])]):t._e()])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"heading-layout1"},[e("div",{staticClass:"item-title"},[e("h3",[this._v("Member Registration")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"form-group"},[e("button",{staticClass:"btn-fill-lg btn-gradient-yellow btn-hover-bluedark btn-block",attrs:{type:"submit"}},[this._v("\n                  Save\n                ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"heading-layout1"},[e("div",{staticClass:"item-title"},[e("h3",[this._v("All Library Pass")])]),this._v(" "),e("button",{staticClass:"btn btn-link text-dark removeBtn",attrs:{type:"submit","data-toggle":"tooltip",title:"Remove"}},[e("i",{staticClass:"fa fa-trash fa-2x"})])])}],!1,null,null,null);e.default=r.exports}}]);