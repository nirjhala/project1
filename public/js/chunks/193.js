(window.webpackJsonp=window.webpackJsonp||[]).push([[193],{477:function(t,e,n){"use strict";n.r(e);var a=n(4),s=n.n(a),l=n(10),i=n.n(l),o=n(1),c={components:{Multiselect:i.a},data:function(){return{errors:0,lists:{},allSelected:0,check:[],student:"",allClasses:[],classes:[],students:[],loaded:0,subjectId:"",clickActions:[{label:"Pay Fee",link:{name:"StudentPayFee",params:{id:""}}},{label:"Fee Details",link:{name:"StudentFeeDetails",params:{id:""}}},{label:"TC Generate",link:!1,click:"openTc"},{label:"Penalty",link:"#"},{label:"Student Edit",link:{name:"EditStudent",params:{id:""}}},{label:"Attendance",link:{name:"StudentAttendance",params:{id:""}}},{label:"Full Mark-sheet",link:!1,click:"openMarksheet"},{label:"Student Details",link:{name:"StudentDetails",params:{id:""}}}],token:localStorage.getItem("token")}},mounted:function(){this.getStudents()},methods:{searchAfterDebounce:s.a.debounce((function(){this.searchData()}),500),handle_function_call:function(t){this[t]()},openMarksheet:function(){window.open(this.baseURL+"api/student/marksheet/"+this.student.id)},openTc:function(){window.open(this.baseURL+"api/student/tc/"+this.student.id)},studentLabel:function(t){var e=t.user,n=t.father_info,a=t.section_name,s=e.name;return n&&n.name&&(s+=" ".concat(n.name)),s+=", Class - ",a&&a.cls&&a.cls.name&&(s+=" ".concat(a.cls.name)),a&&a.name&&(s+=" ".concat(a.name)),s},getStudents:function(){var t=this;o.D.getStudents().then((function(e){t.students=e.data})).catch((function(t){console.log("Errors: ",t)}))},searchData:function(t){var e=this,n=this.s;void 0===t&&(t=1),this.loaded=0,axios.create({baseURL:this.apiBaseUrl,headers:{Authorization:"Bearer "+this.token,Accept:"application/json"}}).get("search-student/?page="+t+"&s="+n).then((function(t){e.loaded=1,e.lists=t.data.data,t.data.status||(e.errors=1)})).catch((function(t){e.loaded=1,console.log(t)}))},getRecords:function(t){var e=this;void 0===t&&(t=1),this.loaded=0,axios.create({baseURL:this.apiBaseUrl,headers:{Authorization:"Bearer "+this.token,Accept:"application/json"}}).get("view-student/?page="+t).then((function(t){t.data.status?e.lists=t.data.data:e.errors=1,e.loaded=1})).catch((function(t){e.loaded=1,console.log(t)}))},deleteRecord:function(){var t=this,e={check:this.check};$(this).closest("form");if(!(this.check.length>0))return this.loaded=1,swal("Warning","Please select at least one record to delete.","warning"),!1;swal({title:"Are you sure?",text:"Once deleted, you will not be able to recover this record!",icon:"warning",buttons:!0,dangerMode:!0}).then((function(n){n&&(t.loaded=0,axios.create({baseURL:t.apiBaseUrl,headers:{Authorization:"Bearer "+t.token,Accept:"application/json"}}).post("remove-student",e).then((function(e){e.status?(t.getRecords(),t.$toast.success("Selected record(s) has been deleted.")):(t.loaded=1,t.$toast.warning("Record(s) unable to delete."))})).catch((function(e){t.loaded=1,console.log(e)})))}))}},watch:{s:function(t){this.searchAfterDebounce()},student:function(t){var e=this;this.clickActions.forEach((function(t,n){t.link.params&&(e.clickActions[n].link.params.id=e.student.uid)}))}}},d=(n(23),n(0)),r=Object(d.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"dashboard-content-one"},[n("div",{staticClass:"breadcrumbs-area"},[n("h3",[t._v("Student One Click Actions")]),t._v(" "),n("ul",[n("li",[n("router-link",{attrs:{to:{name:"dashboard"}}},[t._v("Dashboard")])],1),t._v(" "),n("li",[n("router-link",{attrs:{to:{name:"StudentMaster"}}},[t._v("Student Master")])],1),t._v(" "),n("li",[t._v("Student One Click Actions")])])]),t._v(" "),n("div",{staticClass:"mg-b-20"},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-body"},[n("div",{staticClass:"gutters-8"},[n("div",{staticClass:"form-group"},[n("multiselect",{attrs:{"track-by":"uid",placeholder:"Select Student","select-label":"","deselect-label":"",options:t.students,"custom-label":t.studentLabel,searchable:!0,"allow-empty":!1},scopedSlots:t._u([{key:"singleLabel",fn:function(e){var n=e.option;return[t._v("\n                                "+t._s(n.user.name+" - "+n.father_info.name+", Class - "+n.section_name.cls.name+" "+n.section_name.name)+"\n                            ")]}}]),model:{value:t.student,callback:function(e){t.student=e},expression:"student"}})],1)]),t._v(" "),t.student?n("div",[n("div",{staticClass:"mb-3 table-responsive"},[n("table",{staticClass:"table table-bordered"},[n("tr",[n("th",[t._v("NAME")]),t._v(" "),n("td",[t._v(t._s(t.student.user.name))])]),t._v(" "),n("tr",[n("th",[t._v("FATHER NAME")]),t._v(" "),n("td",[t._v(t._s(t.student.father_info.name))])]),t._v(" "),n("tr",[n("th",[t._v("ROLL NO.")]),t._v(" "),n("td",[t._v(t._s(t.student.roll_no?t.student.roll_no:"N/A"))])]),t._v(" "),n("tr",[n("th",[t._v("CLASS")]),t._v(" "),n("td",[t._v(t._s(t.student.section_name.cls.name+"-"+t.student.section_name.name))])])])]),t._v(" "),n("b-row",t._l(t.clickActions,(function(e,a){return n("b-col",{key:a,attrs:{sm:"3"}},[e.link?n("router-link",{staticClass:"btn btn-dark btn-lg btn-block py-4 mb-3",attrs:{to:e.link}},[t._v(t._s(e.label))]):t._e(),t._v(" "),e.click?n("button",{staticClass:"btn btn-dark btn-lg btn-block py-4 mb-3",attrs:{type:"button"},on:{click:function(n){return t.handle_function_call(e.click)}}},[t._v(t._s(e.label))]):t._e()],1)})),1)],1):t._e()])])])])}),[],!1,null,null,null);e.default=r.exports}}]);