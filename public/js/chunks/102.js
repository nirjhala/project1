(window.webpackJsonp=window.webpackJsonp||[]).push([[102],{364:function(t,e,a){"use strict";var i=a(60);a.n(i).a},365:function(t,e,a){(t.exports=a(7)(!1)).push([t.i,"label[data-v-03245a42]{text-transform:capitalize}",""])},534:function(t,e,a){"use strict";a.r(e);var i=a(2),r=a(1),s={data:function(){return{admit_card:{section_id:"",exam_type_id:"",instruction:""},admit_card_subjects:[],student:null,classes:[],exam_types:{},subjects:{},success:null,errors:[],loaded:0}},validations:function(){return{admit_card:{section_id:{required:i.required},exam_type_id:{required:i.required},instruction:{required:i.required}},admit_card_subjects:{required:i.required,$each:{subject_id:{required:i.required},date:{required:i.required},time:{required:i.required}}}}},mounted:function(){this.routeLoading(),this.fetch_exam_types(),this.fetch_all_classes()},methods:{routeLoading:function(){this.$route.params.id?this.getInfo():this.loaded=1},removeSubject:function(t){this.admit_card_subjects.splice(t,1)},fetch_subjects:function(){var t=this;this.admit_card_subjects=[],this.admit_card.section_id&&r.D.fetchSubjectBySection(this.admit_card.section_id).then((function(e){for(var a in t.subjects=e.data,t.subjects)t.admit_card_subjects.push({subject_id:a,date:"",time:""})}))},fetch_exam_types:function(){var t=this;Object(r.pc)("type=all").then((function(e){t.exam_types=e.data.types})).catch((function(t){console.log("Errors: ",t)}))},fetch_all_classes:function(){var t=this;Object(r.ac)().then((function(e){t.classes=e.data}))},getInfo:function(){var t=this;this.loaded=0,Object(r.Eb)(this.$route.params.id).then((function(e){t.form=e.data,t.loaded=1}))},saveData:function(){var t=this;if(this.$v.$touch(),!this.$v.$anyError){this.loaded=0;var e={admit_card:this.admit_card,admit_card_subjects:this.admit_card_subjects};this.$route.params.id?Object(r.G)(this.$route.params.id,e).then((function(e){t.loaded=1,t.$router.push({name:"ViewAdmitCard"})})).catch((function(e){t.loaded=1,console.log(e)})):Object(r.c)(e).then((function(e){t.loaded=1,t.$router.push({name:"ViewAdmitCard"})})).catch((function(e){t.loaded=1,console.log(e)}))}}},watch:{"$route.params.id":function(){this.routeLoading()},"$route.params.type":function(t){this.type=t},student:function(t){this.form.name=t.user.name,this.form.class=t.section_name.cls.name,this.form.father_name=t.father_info.name,this.form.mother_name=t.mother_info.name,this.form.gender=t.user.gender,this.form.admission_no=t.reg_no}}},o=(a(364),a(0)),n=Object(o.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dashboard-content-one"},[a("div",{staticClass:"breadcrumbs-area"},[a("div",{staticClass:"float-right"},[a("router-link",{staticClass:"fw-btn-fill btn-gradient-yellow text-white",attrs:{to:{name:"ViewAdmitCard"}}},[t._v("View Admit Card")])],1),t._v(" "),a("h3",[t._v(t._s(t.$route.params.id?"Edit":"Add")+" Admit Card")]),t._v(" "),a("ul",[a("li",[a("router-link",{attrs:{to:{name:"dashboard"}}},[t._v("Dashboard")])],1),t._v(" "),a("li",[a("router-link",{attrs:{to:{name:"ExamMaster"}}},[t._v("Exam Master")])],1),t._v(" "),a("li",[a("router-link",{attrs:{to:{name:"ViewAdmitCard"}}},[t._v("Admit Card")])],1),t._v(" "),a("li",[t._v(t._s(t.$route.params.id?"Edit":"Add")+" Admit Card")])])]),t._v(" "),a("b-card",{staticClass:"h-auto",attrs:{title:t.$route.params.id?"Edit Admit Card":"Create Admit Card"}},[a("b-form",{attrs:{method:"post"},on:{submit:function(e){return e.preventDefault(),t.saveData(e)}}},[a("b-row",[a("b-form-group",{staticClass:"col-sm-6",attrs:{label:"Class / Section *"}},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.$v.admit_card.section_id.$model,expression:"$v.admit_card.section_id.$model"}],staticClass:"form-control",class:{"is-invalid":t.$v.admit_card.section_id.$error},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.$v.admit_card.section_id,"$model",e.target.multiple?a:a[0])},t.fetch_subjects]}},[a("option",{attrs:{value:""}},[t._v("Select Class")]),t._v(" "),t._l(t.classes,(function(e,i){return a("optgroup",{key:i,attrs:{label:e.dept.dept_name+" "+e.name}},t._l(e.sections,(function(i,r){return a("option",{key:r,domProps:{value:i.id}},[t._v(t._s(e.name+" - "+i.name))])})),0)}))],2),t._v(" "),a("b-form-invalid-feedback",[t._v("Please select class")])],1),t._v(" "),a("b-form-group",{staticClass:"col-sm-6",attrs:{label:"Select Exam"}},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.$v.admit_card.exam_type_id.$model,expression:"$v.admit_card.exam_type_id.$model"}],staticClass:"form-control",class:{"is-invalid":t.$v.admit_card.exam_type_id.$error},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.$v.admit_card.exam_type_id,"$model",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[t._v("Select Exam")]),t._v(" "),t._l(t.exam_types,(function(e,i){return a("option",{key:i,domProps:{value:i}},[t._v(t._s(e))])}))],2),t._v(" "),a("b-form-invalid-feedback",[t._v("Please select exam")])],1)],1),t._v(" "),t._l(t.$v.admit_card_subjects.$each.$iter,(function(e,i){return a("b-row",{key:i},[a("b-col",{attrs:{sm:"11"}},[a("b-row",[a("b-form-group",{staticClass:"col-sm-4",attrs:{label:"Subject"}},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.subject_id.$model,expression:"subj.subject_id.$model"}],staticClass:"form-control",class:{"is-invalid":e.subject_id.$error},on:{change:function(a){var i=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(e.subject_id,"$model",a.target.multiple?i:i[0])}}},[a("option",{attrs:{value:""}},[t._v("Select Subject")]),t._v(" "),t._l(t.subjects,(function(e,i){return a("option",{key:i,domProps:{value:i}},[t._v(t._s(e))])}))],2),t._v(" "),a("b-form-invalid-feedback",[t._v("Please select an option")])],1),t._v(" "),a("b-form-group",{staticClass:"col-sm-4",attrs:{label:"Date"}},[a("b-input",{class:{"is-invalid":e.date.$error},attrs:{type:"date",placeholder:"Enter Date"},model:{value:e.date.$model,callback:function(a){t.$set(e.date,"$model","string"==typeof a?a.trim():a)},expression:"subj.date.$model"}}),t._v(" "),a("b-form-invalid-feedback",[t._v("Please enter date.")])],1),t._v(" "),a("b-form-group",{staticClass:"col-sm-4",attrs:{label:"Time"}},[a("b-input",{class:{"is-invalid":e.time.$error},attrs:{type:"time",placeholder:"Enter Time"},model:{value:e.time.$model,callback:function(a){t.$set(e.time,"$model","string"==typeof a?a.trim():a)},expression:"subj.time.$model"}}),t._v(" "),a("b-form-invalid-feedback",[t._v("Please enter time.")])],1)],1)],1),t._v(" "),a("b-form-group",{staticClass:"col-sm-1"},[a("label",[t._v("Â ")]),t._v(" "),t.admit_card_subjects.length>1?a("b-button",{staticStyle:{height:"40px","font-size":"16px"},attrs:{type:"button",variant:"danger",block:""},on:{click:function(e){return t.removeSubject(i)}}},[a("i",{staticClass:"icon-minus-circle"})]):t._e()],1)],1)})),t._v(" "),a("b-form-group",{attrs:{label:"Instructions *"}},[a("b-form-textarea",{staticClass:"h-auto",class:{"is-invalid":t.$v.admit_card.instruction.$error},attrs:{rows:"15",placeholder:"Instruction will be printed on admit card"},model:{value:t.$v.admit_card.instruction.$model,callback:function(e){t.$set(t.$v.admit_card.instruction,"$model","string"==typeof e?e.trim():e)},expression:"$v.admit_card.instruction.$model"}}),t._v(" "),a("b-form-invalid-feedback",[t._v("Please enter instruction.")])],1),t._v(" "),a("button",{staticClass:"btn-fill-lg btn-gradient-yellow btn-hover-bluedark",attrs:{type:"submit"}},[t._v(t._s(t.$route.params.id?"Update":"Save"))]),t._v(" "),a("button",{staticClass:"btn-fill-lg bg-blue-dark btn-hover-yellow",attrs:{type:"reset"}},[t._v("Reset")])],2)],1)],1)}),[],!1,null,"03245a42",null);e.default=n.exports},60:function(t,e,a){var i=a(365);"string"==typeof i&&(i=[[t.i,i,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};a(8)(i,r);i.locals&&(t.exports=i.locals)}}]);