(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{609:function(e,t,a){"use strict";a.r(t);var r={data:function(){return{record:{type:"Complain",against:"",teacher_id:"",subject:"",remarks:""},errors:[],teachers:[],cities:[],pincodes:[],loaded:0,token:localStorage.getItem("token")}},mounted:function(){var e=this.$route.params;this.getTeachers(),null!=e.id&&""!=e.id?this.getInfo(e.id):this.loaded=1},methods:{getTeachers:function(){var e=this;axios.create({baseURL:this.apiBaseUrl,headers:{Authorization:"Bearer "+this.token,Accept:"application/json"}}).get("get-teachers").then((function(t){e.teachers=t.data}))},getInfo:function(e){var t=this;axios.create({baseURL:this.apiBaseUrl,headers:{Authorization:"Bearer "+this.token,Accept:"application/json"}}).get("complain/"+e).then((function(e){var a=e.data;t.id=a.id,t.record=a,a.city_name&&t.getCities(t.state),t.loaded=1,$(".select2").each((function(){$(this).trigger("change")}))}))},addData:function(){var e=this,t={record:this.record};this.loaded=0,axios.create({baseURL:this.apiBaseUrl,headers:{Authorization:"Bearer "+this.token,Accept:"application/json"}}).post("complain",t).then((function(t){t.data.status?e.$router.push({name:"view-complain"}).then((function(t){e.loaded=1,e.$toast.success("Record saved.")})).catch((function(t){e.loaded=1,console.log(t)})):(e.loaded=1,e.errors=t.data.errors)})).catch((function(t){e.loaded=1,console.log(t)}))},updateData:function(){var e=this,t={record:this.record};this.loaded=0,axios.create({baseURL:this.apiBaseUrl,headers:{Authorization:"Bearer "+this.token,Accept:"application/json"}}).put("complain/"+this.id,t).then((function(t){t.data.status?e.$router.push({name:"view-complain"}).then((function(t){e.loaded=1,e.$toast.success("Record saved.")})).catch((function(t){e.loaded=1,console.log(t)})):(e.loaded=1,e.errors=t.data.errors)})).catch((function(t){e.loaded=1,console.log(t)}))}}},o=a(0),s=Object(o.a)(r,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dashboard-content-one"},[a("div",{staticClass:"breadcrumbs-area"},[a("div",{staticClass:"float-right"},[a("router-link",{staticClass:"fw-btn-fill btn-gradient-yellow text-white",attrs:{to:{name:"hostel"}}},[e._v("View Complain")])],1),e._v(" "),a("h3",[e._v(e._s(e.id?"Edit":"Raise")+" Complain")]),e._v(" "),a("ul",[a("li",[a("router-link",{attrs:{to:{name:"dashboard"}}},[e._v("Dashboard")])],1),e._v(" "),a("li",[a("router-link",{attrs:{to:{name:"hostel"}}},[e._v("Complain")])],1),e._v(" "),a("li",[e._v(e._s(e.id?"Edit":"Raise")+" Complain")])])]),e._v(" "),a("div",{staticClass:"card height-auto"},[a("div",{staticClass:"card-body"},[e.loaded?e._e():a("div",{staticClass:"text-center"},[a("b-spinner")],1),e._v(" "),e.loaded?a("div",[a("div",{staticClass:"heading-layout1"},[a("div",{staticClass:"item-title"},[a("h3",[e._v(e._s(e.id?"Edit":"Raise New")+" Complain")])])]),e._v(" "),a("form",{staticClass:"new-added-form",on:{submit:function(t){t.preventDefault(),e.id?e.updateData():e.addData()}}},[e.errors.length?a("div",{staticClass:"alert alert-danger"},[a("ul",{staticClass:"mb-0"},e._l(e.errors,(function(t,r){return a("li",{key:r},[e._v("\n                "+e._s(t)+"\n              ")])})),0)]):e._e(),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.id,expression:"id"}],attrs:{type:"hidden",value:""},domProps:{value:e.id},on:{input:function(t){t.target.composing||(e.id=t.target.value)}}}),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-4 col-12 form-group"},[a("label",[e._v("Type *")]),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.record.type,expression:"record.type"}],staticClass:"form-control",attrs:{required:""},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.record,"type",t.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"Complain"}},[e._v("Complain")]),e._v(" "),a("option",{attrs:{value:"Suggestion"}},[e._v("Suggestion")])])]),e._v(" "),a("div",{staticClass:"col-lg-4 col-12 form-group"},[a("label",[e._v(e._s("Complain"==e.record.type?"Against":"For")+" *")]),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.record.against,expression:"record.against"}],staticClass:"form-control",attrs:{required:""},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.record,"against",t.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[e._v("Select Any Option")]),e._v(" "),a("option",{attrs:{value:"School"}},[e._v("School")]),e._v(" "),a("option",{attrs:{value:"Principal"}},[e._v("Principal")]),e._v(" "),a("option",{attrs:{value:"Head Master"}},[e._v("Head Master")]),e._v(" "),a("option",{attrs:{value:"Teacher"}},[e._v("Teacher")]),e._v(" "),a("option",{attrs:{value:"Other"}},[e._v("Other")])])]),e._v(" "),"Teacher"==e.record.against?a("div",{staticClass:"col-lg-4 col-12 form-group"},[a("label",[e._v("Select Teacher")]),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.record.teacher_id,expression:"record.teacher_id"}],staticClass:"form-control",attrs:{required:""},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.record,"teacher_id",t.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[e._v("Select Teacher")]),e._v(" "),e._l(e.teachers,(function(t,r){return a("option",{key:r,domProps:{value:t.id}},[e._v("\n                  "+e._s(t.name)+"\n                ")])}))],2)]):e._e()]),e._v(" "),a("div",{staticClass:"form-group"},[a("label",[e._v("Subject")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.record.subject,expression:"record.subject"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:e.record.subject},on:{input:function(t){t.target.composing||e.$set(e.record,"subject",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"form-group"},[a("label",[e._v("Complain / Suggestion")]),e._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.record.remarks,expression:"record.remarks"}],staticClass:"form-control",staticStyle:{height:"200px"},attrs:{rows:"8",required:""},domProps:{value:e.record.remarks},on:{input:function(t){t.target.composing||e.$set(e.record,"remarks",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 form-group mg-t-8"},[a("button",{staticClass:"btn-fill-lg btn-gradient-yellow btn-hover-bluedark",attrs:{type:"submit"}},[e._v("\n                "+e._s(e.id?"Update":"Save")+"\n              ")]),e._v(" "),a("button",{staticClass:"btn-fill-lg bg-blue-dark btn-hover-yellow",attrs:{type:"reset"}},[e._v("\n                Reset\n              ")])])])])]):e._e()])])])}),[],!1,null,null,null);t.default=s.exports}}]);