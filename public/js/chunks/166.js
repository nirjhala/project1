(window.webpackJsonp=window.webpackJsonp||[]).push([[166],{465:function(e,t,s){"use strict";s.r(t);var a={data:function(){return{errors:0,lists:{},check:[],s:"",class_id:"",departments:[],installments:[],ftypes:{},record:{},fees_for_new:[],fees_for_old:[],loaded:0,token:localStorage.getItem("token")}},mounted:function(){this.getDepartments()},methods:{getDepartments:function(){var e=this;this.loaded=0,axios.create({baseURL:this.apiBaseUrl,headers:{Authorization:"Bearer "+this.token,Accept:"application/json"}}).get("get-all-departments").then((function(t){e.loaded=1,e.departments=t.data}))},getInstallments:function(){var e=this;this.loaded=0;axios.create({baseURL:this.apiBaseUrl,headers:{Authorization:"Bearer "+this.token,Accept:"application/json"}}).get("get-all-fees-type").then((function(t){e.loaded=1,e.ftypes=t.data,t.data,e.effectFeesInput()}))},effectFeesInput:function(){var e=this,t=[];if(e.ftypes.length){$.each(e.ftypes,(function(s,a){t[a.id]={fees_for_new:0,fees_for_old:0},e.record=t}));var s={class_id:e.class_id,session:""};axios.create({baseURL:e.apiBaseUrl,headers:{Authorization:"Bearer "+e.token,Accept:"application/json"}}).post("fees",s).then((function(t){t.status&&(e.record=t.data)}))}},saveFees:function(){var e=this,t={record:this.record,class_id:this.class_id};axios.create({baseURL:this.apiBaseUrl,headers:{Authorization:"Bearer "+this.token,Accept:"application/json"}}).post("fees/add",t).then((function(t){e.loaded=1,t.status?e.getRecords():e.errors=1})).catch((function(t){e.loaded=1,console.log(t)}))}}},o=s(0),r=Object(o.a)(a,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"dashboard-content-one"},[s("div",{staticClass:"breadcrumbs-area"},[s("div",{staticClass:"float-right"},[s("router-link",{staticClass:"fw-btn-fill btn-gradient-yellow text-white",attrs:{to:{name:"add-fees-installment"}}},[e._v("Add New")])],1),e._v(" "),s("h3",[e._v("Fees")]),e._v(" "),s("ul",[s("li",[s("router-link",{attrs:{to:{name:"dashboard"}}},[e._v("Dashboard")])],1),e._v(" "),s("li",[s("router-link",{attrs:{to:{name:"FeeMaster"}}},[e._v("Fees Management")])],1),e._v(" "),s("li",[e._v("Fees")])])]),e._v(" "),s("form",{attrs:{method:"post"},on:{submit:function(t){return t.preventDefault(),e.saveFees()}}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm-3"},[s("div",{staticClass:"card height-auto"},[s("div",{staticClass:"card-body"},[s("h3",{staticClass:"card-title"},[e._v("Select Class")]),e._v(" "),s("div",{staticClass:"form-group"},[s("label",[e._v("Select Class")]),e._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:e.class_id,expression:"class_id"}],staticClass:"form-control",on:{change:[function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.class_id=t.target.multiple?s:s[0]},function(t){return e.getInstallments()}]}},[s("option",{attrs:{value:""}},[e._v("Select a Class")]),e._v(" "),e._l(e.departments,(function(t,a){return s("optgroup",{key:a,attrs:{label:t.dept_name}},e._l(t.classes,(function(t,a){return s("option",{key:a,domProps:{value:t.id}},[e._v(e._s(t.name))])})),0)}))],2)]),e._v(" "),e.ftypes.length?s("button",{staticClass:"fw-btn-fill btn-block btn-gradient-yellow text-white",attrs:{type:"submit"}},[e._v("Save & Update")]):e._e()])])]),e._v(" "),e.ftypes.length?s("div",{staticClass:"col-sm-9"},[s("div",{staticClass:"card height-auto mb-1"},[s("div",{staticClass:"card-body"},[s("h3",{staticClass:"card-title"},[e._v("Total Fees (Yearly)")]),e._v(" "),s("div",{staticClass:"table-responsive"},[s("table",{staticClass:"table table-striped table-sm"},[e._m(0),e._v(" "),e._l(e.ftypes,(function(t,a){return s("tr",{key:a},[s("td",[e._v(e._s(t.name))]),e._v(" "),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.record[t.id].fees_for_new,expression:"record[ft.id].fees_for_new"}],staticClass:"form-control",attrs:{type:"number",value:"0",min:"0",disabled:"old"==t.fees_for},domProps:{value:e.record[t.id].fees_for_new},on:{input:function(s){s.target.composing||e.$set(e.record[t.id],"fees_for_new",s.target.value)}}})]),e._v(" "),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.record[t.id].fees_for_old,expression:"record[ft.id].fees_for_old"}],staticClass:"form-control",attrs:{type:"number",value:"0",min:"0",disabled:"new"==t.fees_for},domProps:{value:e.record[t.id].fees_for_old},on:{input:function(s){s.target.composing||e.$set(e.record[t.id],"fees_for_old",s.target.value)}}})])])}))],2)])])])]):e._e()])])])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("thead",[t("tr",[t("th",[this._v("Fees Type")]),this._v(" "),t("th",[this._v("New Admission")]),this._v(" "),t("th",[this._v("Old Admission")])])])}],!1,null,null,null);t.default=r.exports}}]);